TODO. 开头的引子

观众：脑力工作者、互联网人士、热爱ai和新技术的程序员，大家有很多工作经验，工作中也会有很多痛点

# 三种协作模式对比

从claude code具体实践中提取出，主要有三种与claude code合作方式

| 模式类型 | 特征描述 | 适用场景 | 成功案例 | 成功率 |
|---------|---------|---------|---------|--------|
| **异步自主模式** | Claude独立工作，人工定期检查 | 外围功能、原型开发、重构任务 | Vim模式实现（70%代码自主完成） | ~33% |
| **同步协作模式** | 人机实时配合，持续监督 | 核心业务逻辑、关键修复 | 核心功能实现、架构设计 | 60-80% |
| **混合探索模式** | 先探索理解，再执行实现 | 不熟悉代码库、跨领域任务 | 代码库导航、技术学习 | 70-90% |

这三种模式本质上对应了程序员日常工作的三个核心场景：

**同步协作模式 ← 核心关键路径（工作中20%的重要内容）**
- 具体场景：设计推荐系统的架构时，我负责思考召回机制，我设计了召回A、B、C三路，而AI会站在我的角度上帮我分析还应当补充的召回路或者低曝光路
- 工作方式：我通过prompt工程+需求描述+目标告诉AI我的设计思路，AI回复"考虑过长尾内容的召回吗？还有新用户冷启动的情况..."
- 为什么有效：核心架构决策不能出错，需要人的业务理解 + AI的全面性分析

**异步自主模式 ← 重复性和一次性任务**  
- 具体场景：需要写一个复杂的多层嵌套SQL语句分析现网用户曝光是否符合预期，或者需要对某些数据使用AI进行打标
- 工作方式：我说"帮我写SQL分析用户曝光分布，检查是否有部分用户曝光过多"，然后去处理其他事情，回来检查结果
- 为什么有效：这类分析任务逻辑清晰但实现繁琐，AI独立完成比我手写快得多

**混合探索模式 ← 未知领域探索**
- 具体场景：对code agent感兴趣但不懂实现，借助AI快速理解gemini cli的架构；或者作为业务开发，在AI辅助下理解AI经典论文并快速实现demo
- 工作方式：先问AI"gemini cli的核心架构是什么？"，再问"这个模块是怎么工作的？"，最后"我想实现类似功能应该怎么开始？"
- 为什么有效：过去需要啃英文论文或者找专家请教好几天，现在几小时就能理解并上手实践

> 其实文中还有三种小技巧之前没意识到的做法「其实也有刷到过有些人这样做过，但自己并未尝试」，也值得学习

#### 🎰 "老虎机模式"（数据科学团队）

**原文描述：**
> **处理重复的重构任务**：当遇到合并冲突或需要进行较复杂的文件重构——这些任务对于编辑器宏来说太复杂但又不足以值得大量开发精力——他们像"拉老虎机"一样使用 Claude Code：先提交当前代码状态，让 Claude 自主运行 30 分钟，然后要么接受它的解决方案，要么在结果不理想时重新开始。

**最佳实践建议（原文）：**
> **把它当作老虎机来用**：在让 Claude 开始工作前先保存当前状态，让它自主运行约 30 分钟，然后要么接受结果，要么干脆推倒重来，而不要试图硬着头皮修正 Claude 的错误。重来往往比费劲纠错成功率更高。

```
工作流：保存状态 → Claude自主运行30分钟 → 接受结果或重新开始
优势：避免过度纠错，提高整体成功率
关键：不要试图修复Claude的错误，重来往往更有效
```

为什么"老虎机模式"有效？—— 从ML工程师的直觉分析

信息论角度
AI的上下文窗口是有限的，错误会"污染"整个上下文：
- 错误的代码片段会误导后续生成
- 修复过程的讨论会占用宝贵的token
- 重新开始 = 重置上下文，获得最大信息熵

**这就像机器学习中的"gradient explosion"问题 —— 有时重新初始化比继续训练更有效**

也让我想起之前观看claude的一次播客中，claude的pm分享自己在prompt工程的一个最佳实践：当你在对话中发现出错了，不要试图去修复，而是重新开始，因为重新开始往往更有效

比喻：类似重启电脑

#### 👥 双代理分工模式（增长营销团队）

**原文描述：**
> **自动生成 Google Ads 创意**：团队构建了一个自主工作流，可以处理包含数百条广告及其效果指标的 CSV 文件，识别需要改进的表现不佳广告，并生成满足严格字符限制的新广告变体（标题限 30 个字符，描述限 90 个字符）。**通过两个专业的子代理（分别负责标题和描述）**，系统能够在几分钟内生成数百条新广告，而不必在多个广告系列中进行人工创建。这使他们能够大规模地进行测试和迭代，而这些在过去需要投入大量时间。

**最佳实践建议（原文）：**
> **将复杂工作流拆分为专门子代理**：不要试图用单一的提示或流程包揽所有工作，而是为各部分任务创建独立的代理（例如一个负责生成标题，另一个负责生成描述）。这样做能让调试更容易，并在处理复杂需求时提高输出质量。

```
实施：创建专门子代理处理不同任务部分
案例：标题生成代理 + 描述生成代理
效果：输出质量更高，调试更容易，可扩展性强
```

直觉上的思考，

多目标优化的帕累托困境

单一代理处理"标题+描述"实际上是一个多目标优化问题：

目标函数：max f(标题吸引力, 描述详细度, 整体一致性, 字符限制...)
约束条件：标题≤30字符, 描述≤90字符, 品牌调性一致...

问题在于：这些目标往往是冲突的
- 吸引力最大化 ↔ 准确性要求
- 简洁性 ↔ 信息完整性
- 创意性 ↔ 品牌规范

在多目标优化中，存在帕累托前沿：无法同时在所有维度都达到最优。单一代理会在目标间妥协，导致所
有维度都是"还可以"，但没有一个维度真正出色。


#### 🖼️ 视觉驱动开发（设计/法务团队）

**原文描述1 - Kubernetes截图调试（数据基础设施团队）：**
> **通过截图进行 Kubernetes 调试**：当 Kubernetes 集群发生故障且无法调度新的 pod 时，团队使用 Claude Code 来诊断问题。他们将仪表板的截图输入 Claude Code，Claude Code 逐步引导他们在 Google Cloud 的 UI 上逐个菜单进行检查，直到发现一条警告提示 pod IP 地址耗尽。随后，Claude Code 提供了精确的命令来创建新的 IP 池并将其添加到集群中，从而无需再让网络专家介入。

**原文描述2 - 快速交互式原型设计（产品设计团队）：**
> **快速交互式原型设计**：通过将设计稿截图粘贴到 Claude Code 中，他们生成了完整可运行的原型，工程师可以立即理解并进行迭代。这取代了以往将静态 Figma 设计交付工程师、并需要大量解释才能转化为代码的传统流程。

**最佳实践建议（原文）：**
> **利用图像粘贴进行原型设计**：使用快捷键直接将截图粘贴进 Claude Code。Claude Code 非常擅长读取设计稿并生成可用代码，这对于将静态设计稿转变为交互式原型非常有价值，工程师可以据此立即展开开发。

> **视觉优先的方法**：他们经常使用屏幕截图向 Claude Code 展示自己期望的界面样式，然后根据视觉反馈进行调整，而不是单靠文字描述需求。

```
流程：截图 → 描述需求 → 代码实现 → 视觉验证
优势：减少沟通成本，提高理解准确性
适用：UI开发、原型设计、界面调整
```

我的想法是，当前大模型已经有一定的图片和视频识别能力，而且因为是端到端的训练，其识别精确度会更加精确

叠加图片的信息承载量以及直观性是比文字更高的「写作分享时也是更加推荐大家多用图表，少用文字」，llm理解的时候可能也是如此的

从cnn角度上，人类和ai的理解图片似乎也是相似的，即CNN的理解「像素 → 边缘 → 形状 → 对象 → 空间关系 → 语义理解」

所以视觉的方式往往可能更加直观有效「仅猜测

# 收益以及落地的思考

## Anthropic 9个团队的收益统计

### 时间节省效果表
| 团队 | 任务类型 | 优化前 | 优化后 | 节省比例 |
|------|---------|--------|--------|----------|
| 安全工程 | 基础设施调试 | 10-15分钟 | 5分钟 | 67% |
| 增长营销 | 广告文案生成 | 2小时 | 15分钟 | 87.5% |
| 产品设计 | 法务协调周期 | 1周 | 1小时 | 95%+ |
| 推理团队 | ML概念研究 | 1小时 | 10-20分钟 | 80% |
| 数据科学 | 重构任务 | 基准时间 | 1/2-1/4 | 50-75% |

### 能力边界扩展表
| 角色 | 原有能力边界 | 扩展后能力 | 典型成果 |
|------|-------------|-----------|---------|
| 设计师 | UI设计、原型 | 状态管理开发 | 大型状态管理改动 |
| 法务人员 | 法律咨询、文档 | 应用开发 | 1小时构建语音辅助应用 |
| 营销人员 | 内容、策略 | 工具开发 | Figma插件、API集成 |
| 数据科学家 | Python、模型 | 前端开发 | 5000行TypeScript应用 |

## 任务复杂度与成功率对照表

| 复杂度等级 | 成功率范围 | 任务类型 | 具体示例 |
|-----------|-----------|---------|---------|
| 🟢 **低复杂度** | **90%+** | 重复性、标准化任务 | 文档生成、单元测试、代码格式化、API封装、可视化模板 |
| 🟡 **中复杂度** | **60-80%** | 功能性、逻辑性任务 | 功能模块、错误修复、数据管道、交互开发、自动化脚本 |
| 🔴 **高复杂度** | **30-50%** | 设计性、创新性任务 | 系统架构、算法优化、系统集成、性能代码、安全功能 |

## 第二个注意到的点：成功团队的共同实践

### 📄 Claude.md文档的重要性

**数据基础设施团队的经验：**
> **编写详细的 Claude.md 文档**：团队认为，在 Claude.md 文件中越详细地记录工作流程、工具和期望，Claude Code 的表现就越出色。这使 Claude Code 在有既定设计模式的情况下执行设置新数据管道等常规任务时格外擅长。

**强化学习团队的实践：**
> **定制你的 Claude.md 文件来规范特定模式**：在 Claude.md 文件中添加指导，避免 Claude 重复犯某些工具调用方面的错误。例如，可以明确告诉它："直接运行 pytest，不要不必要地切换目录后再运行"。这些定制提高了输出的一致性。

**产品设计团队的方法：**
> **使用自定义内存文件引导 Claude 的行为**：创建特定的说明文档，告诉 Claude 你是一名编码经验不多的设计师，需要它提供详细解释并逐步进行小改动。这将大大提高 Claude 回答的质量，并使它的输出不那么令人生畏。

**必备内容清单：**
1. 项目结构和架构说明
2. 编码规范和风格指南
3. 常见模式和反模式
4. 工具使用偏好
5. 特定领域知识

### 🔄 版本控制与检查点策略

**产品开发团队的建议：**
> 团队建议从干净的 Git 仓库状态开始，并**定期提交检查点**，这样如果 Claude 偏离轨道，可以轻松撤销不正确的更改。

**强化学习团队的工作流：**
> **使用多检查点的工作流**：当 Claude 进行更改时及时提交，这样当实验不如预期时可以轻松回滚。这个方法让你可以更具实验性地开发，而无需担心风险。

> **实现了实验性的开发方式**：他们现在采用"尝试-回滚"的方法，经常提交检查点，以便测试 Claude 自主实施的结果，不满意时就回滚，从而可以更大胆地进行实验。

**数据科学团队的"老虎机模式"：**
> 先**提交当前代码状态**，让 Claude 自主运行 30 分钟，然后要么接受它的解决方案，要么在结果不理想时重新开始。

**版本控制策略要点：**
- 频繁提交形成检查点
- 清晰的提交信息
- 分支管理规范
- 快速回滚机制


## 其他，还有一些值得学习的具体的做法

1. **容错机制**：接受1/3成功率，关注整体效益『需要具体的例子』
这里反直觉的例子在于，一个复杂任务原本程序员来做2小时，而使用聪明的claude code，可能30%成功率，重复三次，每次执行30分钟，3次以内可能就完成了，反倒耗时更少；当然考虑到并行性可能可以做的更快
2. **快速迭代**：fail fast原则，及时调整方向
数据科学团队的"老虎机模式"例子，要么接受它的解决方案，要么在结果不理想时重新开始；产品开发团队的快速原型迭代，如果 Claude 偏离轨道，可以轻松撤销不正确的更改；产品工程团队的迭代合作理念，不要期望 Claude 立即给出完美答案，而要把它当作可以与你一同迭代解决问题的合作伙伴
1. **知识分享**：定期团队分享会，传播最佳实践
2. **渐进推广**：从简单任务开始，逐步建立信任

