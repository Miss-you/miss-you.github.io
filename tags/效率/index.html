<!doctype html><html lang=zh dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>效率 | Yousa Driven Development | YDD</title><meta name=keywords content><meta name=description content="面向 AI 协作编程的实践手记"><meta name=author content="Miss-you"><link rel=canonical href=https://miss-you.github.io/tags/%E6%95%88%E7%8E%87/><link crossorigin=anonymous href=/assets/css/stylesheet.90ccfe940c2ebacfe29cf6c094281c8c148bd718511cde00be68d330109118be.css integrity="sha256-kMz+lAwuus/inPbAlCgcjBSL1xhRHN4AvmjTMBCRGL4=" rel="preload stylesheet" as=style><link rel=icon href=https://miss-you.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://miss-you.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://miss-you.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://miss-you.github.io/apple-touch-icon.png><link rel=mask-icon href=https://miss-you.github.io/safari-pinned-tab.svg><meta name=theme-color content="#f4f3ee"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://miss-you.github.io/tags/%E6%95%88%E7%8E%87/index.xml><link rel=alternate hreflang=zh href=https://miss-you.github.io/tags/%E6%95%88%E7%8E%87/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&family=Noto+Serif+SC:wght@400;600;700;900&family=Noto+Sans+SC:wght@300;400;500;700&display=swap" rel=stylesheet><meta property="og:url" content="https://miss-you.github.io/tags/%E6%95%88%E7%8E%87/"><meta property="og:site_name" content="Yousa Driven Development | YDD"><meta property="og:title" content="效率"><meta property="og:description" content="面向 AI 协作编程的实践手记"><meta property="og:locale" content="zh"><meta property="og:type" content="website"><meta name=twitter:card content="summary"><meta name=twitter:title content="效率"><meta name=twitter:description content="面向 AI 协作编程的实践手记"></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://miss-you.github.io/ accesskey=h title="Yousa Driven Development | YDD (Alt + H)">Yousa Driven Development | YDD</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li><li><a href=https://miss-you.github.io/en/ title=English aria-label=English>En</a></li></ul></div></div><ul id=menu><li><a href=https://miss-you.github.io/archives title=归档><span>归档</span></a></li><li><a href=https://miss-you.github.io/tags/ title=标签><span>标签</span></a></li><li><a href=https://miss-you.github.io/tools/ title=工具><span>工具</span></a></li><li><a href=https://miss-you.github.io/categories/ title=分类><span>分类</span></a></li><li><a href=https://github.com/Miss-you title=GitHub><span>GitHub</span>&nbsp;
<svg fill="none" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ul></nav></header><main class=main><header class=page-header><div class=breadcrumbs><a href=https://miss-you.github.io/>主页</a>&nbsp;»&nbsp;<a href=https://miss-you.github.io/tags/>Tags</a></div><h1>效率
<a href=/tags/%E6%95%88%E7%8E%87/index.xml title=RSS aria-label=RSS><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" height="23"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg></a></h1></header><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>为什么有些人越忙越穷，有些人越闲越富</h2></header><div class=entry-content><p>为什么有些人越忙越穷，有些人越闲越富？ 四个故事 下面这些故事，是我从身边和网上常见的模式里拼出来的，细节做了简化。
小雨每天学到凌晨一点。笔记记了十二本，错题本工工整整抄了三遍。她妈妈心疼，但也骄傲，至少孩子在努力。她的同桌小凡每天十一点就睡了，但小凡做了一件不同的事。把每次模考的错题按知识漏洞分类，每一类只做三道典型题，然后讲给同桌听。期末考试，小凡比小雨高了40分。
这个例子不涉及钱。但它说的那件事，出了学校同样成立。
张琳是一家中型公司的市场总监。周五晚上十一点，她还在改第二天要给老板汇报的PPT，措辞改了五遍，每个像素都调到完美。第二天老板花三分钟翻完，说了句「方向可以，推进吧」，然后去打高尔夫了。她改到凌晨，他三分钟定方向。到底谁的时间更值钱？
不只是打工人。自己单干也一样。
设计师小陈在闲鱼接logo设计，一单500块，改三次，前后花两天。一个月满打满算15单，7500块。春节想多挣点，把自己逼到每天只睡五小时，差点进医院。他的一个朋友做了一套Figma设计模板放在Gumroad上，定价99美元，每月被动收入两三千美元。那朋友现在每天下午三点去咖啡馆坐着。一个在用命换钱，一个睡着都在赚。
再看一个你每天路过的场景。
你家小区门口有个煎饼摊。大叔凌晨四点半出摊，站到上午十一点，一天卖150个煎饼，一个赚两块，日入300。他干了八年，每天都是这个数字，因为他的产能上限就是一双手、一口锅、七个小时。抖音上有个人拍了一条「教你在家摊煎饼」的视频，三分钟，播放量两百万。他靠这个号接了一个厨具品牌的年度代言，五十万。
同样的知识。一个被一双手和一口锅锁死，一个被算法放大了几百万倍。
你有没有注意到一件反常的事？在这四个故事里，最忙的那个人，收入最低。看起来最闲的那个人，收入最高。
这不是巧合。努力和产出之间，从来不是一比一的关系。
两种努力 要理解为什么忙碌不等于高产出，得先分清两种根本不同的努力。
第一种叫线性努力。你投入多少时间，产出多少成果，一比一绑定。多干一小时，多赚一小时的钱。第二种叫杠杆化努力。你做一次，被放大一万次。投入和产出脱钩了，不在同一个维度上。一个人每天工作十六小时，没有杠杆，上限就是十六小时的劳动成果。另一个人每天工作四小时，但他写的代码在替一百万人解决问题。
厨师一天最多炒三百盘菜。无论他多勤奋，上限就卡在那里。但如果他把最拿手的菜谱写成标准化流程、教会五十个学徒，这个系统每天能产出一万五千盘。手艺没变，变的是放大倍数。
麦当劳的创始人雷·克罗克不会做汉堡。但他设计了一个让任何人都能做出标准汉堡的系统，每天替他服务近7000万人。麦当劳不是餐饮公司，是系统复制公司。克罗克本人很闲，但他比任何一个忙碌的厨师都富。
其实杠杆不是一个开关，不是「有」和「没有」两种状态。它更像一道阶梯。
最底下一级是纯执行。一双手，一口锅，干一小时算一小时，杠杆倍数是零。往上走一级，你把干活的经验记下来了，变成笔记、变成模板。下次再干同样的事，快了一倍，这就有了一点点杠杆。再往上，模板变成流程，流程交给别人跑，你用人力把自己复制了出去。再往上，流程写成代码，或者做成产品，它不需要任何人盯着就能跑，一天跑二十四小时也不累。最顶上那一级是资本和媒体，钱在替你做决策，内容在替你触达陌生人，你睡着的时候它们还在干活。
代码、媒体、流程、人力、资本，这五种东西本质上都是杠杆，只是放大倍数不同。设计师从接单到做模板，就是从纯执行跳到了产品那一级。煎饼大叔如果把手艺写成流程、教会十个人，就是从零杠杆跳到了人力那一级。每往上走一级，你的时间和产出就脱钩一点。不用一步到顶。先把今天干的事记下来，就已经在爬了。
一个残酷的测试 有一个残酷的测试可以判断你在哪条轨道上。如果你明天倒下了，收入会不会也跟着倒下？
如果会，不管你名片上印的是「自由职业者」还是「CEO」，你卖的都是时间。很多人以为自己跳出了卖时间的陷阱，其实只是换了一个更贵的时薪在卖。从按月卖变成按小时卖，从卖给一个老板变成卖给十个客户。模式没变。
真正从「卖时间」跳到「卖系统」的人，做了一件不同的事。把自己解决问题的方式变成了一个产品。一段代码、一套流程、一个品牌。产品的特征是你造了一次，它可以卖一万次，不需要你在场。Eric Barone一个人、一台电脑、四年半，做出了全球销量超4000万份的星露谷物语。代码在替他7×24小时卖货。同样是忙四年，有人忙出了一份工资，有人忙出了一台永不停歇的印钞机。区别就在这里。你忙的那件事，做完之后还在不在替你工作？
你可能在想，星露谷物语、麦当劳，这不都是幸存者偏差吗？没错，这些是极端值。用了杠杆不保证你成功。但我想说的不是「用杠杆就能暴富」，而是「不用杠杆就一定有天花板」。这是两个完全不同的命题。前者是彩票逻辑，后者是物理约束。一天只有24小时，你的产出上限就卡在那里。杠杆不保证你赢，但没有杠杆，保证你赢不大。
不过事情没那么干净。杠杆放大的是能力，如果能力本身还没长出来，放大一万倍也是零。在练基本功的阶段，老老实实把手艺磨扎实，就是对的策略。杠杆不能替你跳过那一步。
另外，不是所有行业的杠杆都长得像代码和短视频。一个外科医生的杠杆可能是流程和团队，一个手工匠人的杠杆可能是品牌和学徒体系。形态不同，但逻辑一样，都是把个人能力从一双手里解放出去。
还有一件容易忽略的事。杠杆在放大收益的同时，也放大了波动。写代码做产品可能花半年一分钱没赚到，发内容可能两百条都没人看。不是每个人当前的处境都适合承受这种不确定性。承认这一点，不丢人。
这里有个问题。权力、人力、资本这些杠杆都需要许可。你得先当上领导、先有钱、先有信用，才能动用。
但代码、AI和社交媒体不需要。你今晚就可以开始写一个小程序、发一条内容、用AI搭一个自动化工作流。没有人需要给你一把钥匙，钥匙已经放在桌上了。这是人类历史上第一次，几种强大的杠杆工具，门槛低到接近免费。考公上岸的同学需要层层审批才能做一个决定。做短视频的同学一个人、一台手机，前一年半零收入，被父母天天骂不务正业，最近半年突然爆了，一条广告报价五万。他用的就是不需要任何人许可的媒体杠杆。
我猜你现在想说。道理我都懂，但我连睡觉的时间都不够，哪有空建系统？
这个反驳是对的。不是所有人都有「停下来」的条件。有些人的忙碌不是选择，是没有选择。但没有人要求你明天辞职去创业。杠杆可以从极小的地方开始。你每天重复做的那件事，能不能写成一个模板？你踩过的坑，能不能记下来变成别人也能用的经验？从「完成任务」到「积累资产」，有时只差一个意识的转变。
如果你还是觉得太抽象，试试这样。学生党，把这学期反复出错的那类题整理成一页速查表，发到班群里。你自己搞懂了，同学也省了翻课本的时间，这张表就是你的第一个杠杆。上班的，想想每周重复做的那份报告，能不能花一个下午写成自动化模板？搭一次，以后每周省两小时，一年省掉一百小时。自由职业的，你一定有一个问题被客户反复问。把回答写成一篇FAQ文档，下次直接甩链接，省下来的时间去接下一单。
方法很简单。每周列一下自己重复在做的事，挑最烦的那件，写成模板或文档，下周看看是不是真的省了力气。如果省了，恭喜，你有了一个可复用的资产。如果没省，换一件再试。一周一个小实验，成本几乎为零。
判断标准也很简单。杠杆不是做更大的事，而是让同一件事下次更省力，能被更多人复用。
但这还不是全部。如果杠杆的逻辑这么清楚，线性努力有天花板，杠杆化努力的天花板高得多，为什么大多数人还是困在第一种模式里？
三把锁 不是因为笨，也不是因为不想改变。真正卡住人的，是比「知不知道杠杆」更深一层的东西。
第一把锁，大脑。
人的大脑偏爱确定性和即时反馈。线性努力恰好满足这两点。你多干一小时，多赚一小时的钱，大脑的奖赏回路持续激活。而杠杆化努力的早期是反馈黑洞。你花六个月写一个产品，可能一分钱没赚到。你发了两百条内容，播放量还是个位数。大脑讨厌这种延迟回报。这不是意志力问题，是进化留下的神经机制。狩猎采集时代，「这棵树上有果子」比「半年后那块地会长出庄稼」重要一万倍。我们的大脑还在用旧世界的评分系统给新世界的选项打分。
所以线性增长让人上瘾。每年涨薪10%，每月多接几个客户，你觉得生活在变好。但如果你画出那条曲线，它是一条直线。直线的特征是有尽头。你一天能工作的时间是有限的，那就是你的产出天花板。无论你多勤奋，你都不可能把一天活成四十八小时。
线性增长不是增长，是一种伪装得很好的天花板。但因为它有即时反馈，人们宁愿在天花板下安心地忙碌，也不愿走进那条看不见终点的隧道。
第二把锁，文化。
「勤劳致富」是工业时代的逻辑。工厂需要工人按时到岗、按件计酬，所以「投入时间＝创造价值」在那个时代是成立的。整个社会的道德体系、教育体系、评价体系都围绕这个等式搭起来。学校按出勤打分，公司按工时考核，社会按「看起来忙不忙」评价一个人。「我很忙」成了一种社交货币，暗示你被需要、有价值。知识经济早就改变了游戏规则，但我们的道德直觉没有跟上。
我们把忙碌当成勤奋的勋章。但仔细看，它更像一份诊断报告。一个人必须事事亲力亲为，不是因为他不可替代，而是因为他还没有建起任何一个替他工作的系统。CEO可以去度假三周，公司照常运转。不是因为他懒，是因为他花了多年搭了一个不依赖他在场的组织。
忙碌不是价值的信号。它是系统还没建好的信号。
第三把锁，参考系。
煎饼大叔每天出现在你面前，你看到他的辛苦。但那个拍煎饼视频赚五十万的博主，你看不到他前一年半零收入、被父母骂不务正业的阶段。杠杆的建造过程是不可见的，只有结果是可见的。所以大多数人的参考系里，根本没有「杠杆化努力」这个选项。你不知道它存在，不去寻找相关信息，社交圈也都是卖时间的人，就更加确信努力是唯一的路。这是一个自我加强的闭环。
三把锁同时锁住。大脑、文化、参考系，都在把你推向同一条路。更忙、更累、更多时间换更多产出。
怎么打开 要打开这些锁，第一步不是找工具，不是学技术，而是接受一个听起来很荒谬的说法。
真正的勤奋，不是永远在忙，而是让自己闲下来。
这里说的「闲」，不是什么都不做。而是把忙的内容从「执行」迁移到「建系统」，让系统替你执行。
有一种勤奋是每天忙到深夜，日程排得密不透风，倒头就睡，第二天再来一遍。还有一种勤奋是花大量时间思考一个问题。我怎么才能不再需要做这件事？前者的结局是越来越忙。后者的结局是越来越闲。但那个闲不是偷来的，是建出来的。
我知道你在想什么。这不是给懒惰找借口吗？
这个担心合理。但懒惰是逃避投入。我说的「闲」不一样。你先拼命建了一个系统，然后系统替你忙。一个是起点的闲，一个是终点的闲。区分方法很简单。懒的人闲完之后什么都没留下，建系统的人闲完之后多了一个替他工作的东西。
还记得那个改PPT到凌晨的张琳吗？
她的问题不是不够努力。她可能是整个公司最努力的人。但她所有的努力，都花在杠杆的长臂末端，做的是最容易被替代的执行工作。也许有一天，她不是在改PPT，而是在设计一个让团队自己就能做出好PPT的流程。那时候她也许会更闲。但那个闲，不是因为她放弃了，而是因为她终于建好了一个不需要她在场的系统。
我不确定每个人都能找到自己的杠杆。但我确定的是，如果你从来没想过这个维度，你连找的机会都没有。也许真正难的不是找到杠杆，而是放下「忙碌＝有价值」这个让你安心了二十年的等式。</p></div><footer class=entry-footer><span title='2026-02-14 00:30:00 +0800 +0800'>二月 14, 2026</span>&nbsp;·&nbsp;1 分钟&nbsp;·&nbsp;4629 字&nbsp;·&nbsp;Miss-you</footer><a class=entry-link aria-label="post link to 为什么有些人越忙越穷，有些人越闲越富" href=https://miss-you.github.io/posts/20260214-busy-poor-vs-leveraged-wealth/></a></article><article class="post-entry tag-entry"><figure class=entry-cover><img loading=lazy src=https://raw.githubusercontent.com/Miss-you/img/master/painting-tutorials/Design_Your_Own_Game_group_001.png alt=设计游戏的人，才不会被游戏玩></figure><header class=entry-header><h2 class=entry-hint-parent>像玩游戏那样玩 AI</h2></header><div class=entry-content><p>像玩游戏那样玩 AI 1/4 一个反直觉的问题 凌晨两点十七分，你对自己说「这是最后一条」。两点四十三分，你又说了一遍。
第二天早上，你下载了一个 AI 工具。用了五分钟，关掉了。图标沉到第三屏，再也没打开。
你对抖音没有学习意愿，但能刷三小时。你对 AI 充满学习意愿，但用不了十分钟。
我们通常会把它归结为：没时间、不够感兴趣、工具不顺手。
这些当然都可能成立。
但我后来发现，更常见的卡点是：短视频把「下一步」替你安排好了，而 AI 没有。你得自己把它放进流程里。
2/4 上瘾不是问题，问题是对什么上瘾 我们习惯把「上瘾」当贬义词。但仔细想想，上瘾的本质是什么？
做了一件事，得到奖励，想再做一次。
这套东西本身没好坏。它可以让你停不下来地刷视频，也可以让你停不下来地写代码、练琴、健身。
问题不在于你上瘾了，而在于谁在设计这个循环。
抖音的产品经理设计了一个算法，它比你更了解你。你以为在选择看什么，其实在被推着走。滑一下，奖励来了。再滑一下，又来了。继续不费力，停下才费力。
这就是被动上瘾。别人设计机制，你被卷入。
主动上瘾正好反过来。你自己设计机制，你选择卷入。
这里说的「上瘾」不是让你沉迷时间。而是让你不用靠意志力也能开始，但产出要能落到一个真实任务上。如果只是刷起来没有产出，那跟刷视频没区别。
你不是没有自制力。你只是一直在别人的游戏里玩。
2.5/4 一个容易混淆的地方 这里有个常见的误解：很多人觉得自己「用不起来 AI」是因为不够喜欢它。
但你对抖音也谈不上喜欢。你只是打开了手机，它就播了。
「喜欢」和「顺手」是两回事。
喜欢是情绪，会波动。今天喜欢，明天可能就腻了。
顺手是结构。它不依赖你当时的状态，只依赖「开始的摩擦有多低」和「反馈来得有多快」。
短视频强在这里：每一次滑动都是一个「可关闭的最小单元」。做完就结束，没有压力，随时可以再来一次。
而「学 AI」听起来像一个无限任务，给人压力。但「用 AI 改一句话」是一个可关闭的任务，做完就结束。
AI 用不起来，很多时候不是「不有趣」，而是「开始太像一件需要决心的事」。
3/4 两条规则，不是十条清单 有个叫福格的行为学家说过：行为 = 动机 + 能力 + 提示。
动机会波动，能力也确实会成为门槛，尤其是不知道怎么问、怎么用结果的时候。
但最容易被忽视、也最容易立刻改的，往往是「提示」：你有没有给 AI 安排一个默认出场的时刻。
没有这个时刻，AI 就永远停留在「我应该用」的层面。
所以我试下来，真正有用的就两条规则：
规则 1：默认出场时刻
找一个你每天都会做的事，把 AI 绑上去。
比如：打开文档 → 先让 AI 改第一段。不是因为你需要 AI 改，而是让「打开文档」自动触发「用 AI」。
...</p></div><footer class=entry-footer><span title='2025-12-29 13:36:11 +0800 +0800'>十二月 29, 2025</span>&nbsp;·&nbsp;1 分钟&nbsp;·&nbsp;2135 字&nbsp;·&nbsp;Miss-you</footer><a class=entry-link aria-label="post link to 像玩游戏那样玩 AI" href=https://miss-you.github.io/posts/20251229-how-to-use-ai-like-game/></a></article></main><footer class=footer><span>&copy; 2026 <a href=https://miss-you.github.io/>Yousa Driven Development | YDD</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script type=module>
  import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.esm.min.mjs';
  
  
  const isDarkMode = () => {
    return document.body.classList.contains('dark');
  };
  
  
  const mermaidKeywords = [
    'graph ', 'graph TB', 'graph TD', 'graph LR', 'graph RL', 'graph BT',
    'flowchart ', 'flowchart TB', 'flowchart TD', 'flowchart LR', 'flowchart RL', 'flowchart BT',
    'sequenceDiagram', 'classDiagram', 'stateDiagram', 'stateDiagram-v2',
    'erDiagram', 'journey', 'gantt', 'pie', 'requirementDiagram',
    'gitGraph', 'mindmap', 'timeline', 'sankey'
  ];
  
  const isMermaidCode = (code) => {
    const trimmed = code.trim();
    return mermaidKeywords.some(keyword => trimmed.startsWith(keyword));
  };
  
  
  const getColors = () => {
    if (isDarkMode()) {
      return {
        
        bg: '#1d1e20',
        surface: '#2d2e30',
        border: '#444',
        text: '#dadaeb',
        secondary: '#9c9d9e',
        line: '#9c9d9e',
        
        accent1: '#5a7a96',  
        accent2: '#6b8e6b',  
        accent3: '#b8a87c',  
      };
    }
    
    return {
      bg: '#f4f3ee',        
      surface: '#faf9f5',   
      border: '#2c2c2c',    
      text: '#1f1f1f',      
      secondary: '#6c6c6c', 
      line: '#4a4a4a',      
      
      accent1: '#8fb8d4',   
      accent2: '#a8c6a8',   
      accent3: '#d4c59a',   
    };
  };
  
  
  if (!document.getElementById('mermaid-virgil-font')) {
    const style = document.createElement('style');
    style.id = 'mermaid-virgil-font';
    style.textContent = `
      @font-face {
        font-family: "Virgil";
        src: url("https://excalidraw.nyc3.cdn.digitaloceanspaces.com/fonts/Virgil.woff2") format("woff2");
        font-display: swap;
      }
    `;
    document.head.appendChild(style);
  }

  const initMermaid = () => {
    const c = getColors();
    
    mermaid.initialize({
      startOnLoad: false,
      theme: 'base',
      themeVariables: {
        
        fontFamily: '"Virgil", "Noto Serif SC", Georgia, serif',
        fontSize: '16px',           
        
        
        background: c.bg,
        mainBkg: c.surface,
        
        
        primaryColor: c.surface,
        primaryTextColor: c.text,
        primaryBorderColor: c.border,
        
        
        secondaryColor: c.accent1,
        tertiaryColor: c.accent2,
        
        
        lineColor: c.line,
        nodeBorder: c.border,
        clusterBkg: c.bg,
        clusterBorder: c.border,
        
        
        textColor: c.text,
        titleColor: c.text,
        nodeTextColor: c.text,
        labelColor: c.text,
        
        
        edgeLabelBackground: c.bg,
        
        
        actorBorder: c.border,
        actorBkg: c.surface,
        actorTextColor: c.text,
        actorLineColor: c.border,
        signalColor: c.line,
        signalTextColor: c.text,
        
        
        stateBorder: c.border,
        stateBkg: c.surface,
        
        
        cScale0: c.surface,
        cScale1: c.accent1,
        cScale2: c.accent2,
        cScale3: c.accent3,
        cScale4: c.surface,
        cScale5: c.accent1,
      },
      
      
      flowchart: {
        useMaxWidth: true,
        htmlLabels: true,
        curve: 'basis',
        padding: 20,
        nodeSpacing: 50,
        rankSpacing: 60,
      },
      
      
      sequence: {
        useMaxWidth: true,
        diagramMarginX: 50,
        diagramMarginY: 20,
        actorMargin: 60,
        width: 160,
        height: 70,
        boxMargin: 15,
        boxTextMargin: 8,
        noteMargin: 15,
        messageMargin: 40,
        mirrorActors: true,
        bottomMarginAdj: 1,
        rightAngles: false,
        showSequenceNumbers: false,
        
        actorFontSize: '16px',
        noteFontSize: '15px',
        messageFontSize: '15px',
      },
      
      
      state: {
        useMaxWidth: true,
        padding: 15,
        fontSize: '16px',
      },
      
      
      class: {
        useMaxWidth: true,
        fontSize: '15px',
      },
      
      
      er: {
        useMaxWidth: true,
        fontSize: '15px',
      },
      
      
      gantt: {
        useMaxWidth: true,
        fontSize: '14px',
      },
      
      
      look: 'handDrawn',
    });
  };
  
  const renderMermaidDiagrams = async () => {
    const allCodeBlocks = document.querySelectorAll('pre code');
    const mermaidBlocks = [];
    
    allCodeBlocks.forEach(block => {
      const code = block.textContent;
      if (isMermaidCode(code)) {
        mermaidBlocks.push(block);
      }
    });
    
    if (mermaidBlocks.length === 0) return;
    
    initMermaid();
    const c = getColors();
    
    for (const block of mermaidBlocks) {
      const pre = block.parentElement;
      const code = block.textContent.trim();
      
      
      const wrapper = document.createElement('div');
      wrapper.className = 'mermaid-diagram';
      wrapper.style.cssText = `
        margin: 2em 0;
        padding: 24px;
        background: ${c.bg};
        border: 1px solid ${c.border}30;
        border-radius: 8px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.06);
        overflow-x: auto;
      `;
      
      
      const container = document.createElement('div');
      container.style.cssText = `
        display: flex;
        justify-content: center;
        min-width: fit-content;
      `;
      
      const mermaidDiv = document.createElement('div');
      mermaidDiv.className = 'mermaid';
      mermaidDiv.textContent = code;
      container.appendChild(mermaidDiv);
      wrapper.appendChild(container);
      
      pre.parentNode.replaceChild(wrapper, pre);
      
      try {
        await mermaid.run({ querySelector: '.mermaid' });
      } catch (error) {
        console.error('Mermaid error:', error);
      }
    }
  };
  
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', renderMermaidDiagrams);
  } else {
    renderMermaidDiagrams();
  }
  
  
  let timeout;
  const observer = new MutationObserver((mutations) => {
    mutations.forEach((mutation) => {
      if (mutation.attributeName === 'class') {
        clearTimeout(timeout);
        timeout = setTimeout(() => location.reload(), 300);
      }
    });
  });
  observer.observe(document.body, { attributes: true });
</script><style>.mermaid-diagram{font-family:virgil,noto serif sc,Georgia,serif}.mermaid-diagram .mermaid{display:flex;justify-content:center}.mermaid-diagram svg{max-width:100% !important;height:auto !important;font-family:virgil,noto serif sc,Georgia,serif !important}.mermaid-diagram svg text,.mermaid-diagram svg .label,.mermaid-diagram svg .nodeLabel,.mermaid-diagram svg .edgeLabel,.mermaid-diagram svg .messageText,.mermaid-diagram svg .actor text,.mermaid-diagram svg .participant text{fill:#1f1f1f !important;font-family:virgil,noto serif sc,Georgia,serif !important;font-size:15px !important;font-weight:500 !important}.dark .mermaid-diagram svg text,.dark .mermaid-diagram svg .label,.dark .mermaid-diagram svg .nodeLabel,.dark .mermaid-diagram svg .edgeLabel,.dark .mermaid-diagram svg .messageText,.dark .mermaid-diagram svg .actor text,.dark .mermaid-diagram svg .participant text{fill:#dadaeb !important}.mermaid-diagram svg .sequenceDiagram text{font-size:16px !important}.mermaid-diagram svg .actor{font-size:16px !important}.mermaid-diagram svg .messageText{font-size:15px !important}.mermaid-diagram svg .node rect,.mermaid-diagram svg .node circle,.mermaid-diagram svg .node ellipse,.mermaid-diagram svg .node polygon{stroke-width:2px !important}.mermaid-diagram svg{filter:drop-shadow(0 1px 3px rgba(0,0,0,8%))}.dark .mermaid-diagram{background:#1d1e20 !important;border-color:#444 !important;box-shadow:0 2px 8px rgba(0,0,0,.2) !important}@media(max-width:768px){.mermaid-diagram{padding:16px !important;margin:1.5em 0 !important}.mermaid-diagram svg text{font-size:14px !important}}.mermaid-diagram{opacity:0;animation:fadeIn .4s ease-out forwards}@keyframes fadeIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}</style><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>